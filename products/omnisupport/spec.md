# Омниканальный саппорт-бот — Спецификация продукта

## Обзор продукта

**Название**: TBD (рабочее: OmniSupport)

**Тип**: SaaS-платформа для омниканальной поддержки клиентов с ИИ-ассистентом

**Ценностное предложение**: Единая платформа для приёма обращений из всех каналов с сохранением контекста и ИИ-подсказками для операторов на базе знаний бизнеса.

---

## Ключевые возможности

### 1. Омниканальность

**Каналы MVP**:
- Telegram (бот)
- WhatsApp (Business API)
- Веб-виджет (сайт клиента)

**Типы виджетов**:
- Плавающий чат (bubble) — кнопка в углу экрана
- Встраиваемый блок (embed) — интеграция в страницу

**Передача контекста**:
- Клиент может начать диалог в одном канале и продолжить в другом без потери истории
- Оператор видит единую историю всех обращений клиента из всех каналов

### 2. Идентификация клиентов

**Методы связывания профилей**:
- По номеру телефона (приоритет)
- По email-адресу
- Ручное объединение оператором

**Единый профиль клиента** содержит:
- Контактные данные
- Историю обращений из всех каналов
- Теги и заметки операторов
- Предпочтительный канал связи

### 3. ИИ-ассистент для операторов

**Роль ИИ**: Помощник оператора (не автоответчик)

**Функции**:
- Генерация подсказок на основе RAG по базе знаний
- Анализ настроения клиента
- Подготовка черновиков ответов
- Суммаризация длинных диалогов
- Автоматическая классификация обращений

**LLM-провайдеры**:
- YandexGPT (основной)
- GigaChat (альтернатива)

### 4. RAG — база знаний

**Источники данных**:

| Источник | Описание |
|----------|----------|
| Документы | FAQ, инструкции, регламенты (PDF, DOCX, TXT, MD) |
| Сайт | Автоматический краулинг и индексация сайта клиента |
| История диалогов | Обучение на успешных ответах операторов |

**Управление базой**:
- Загрузка документов через интерфейс
- Настройка краулера (URL, глубина, расписание)
- Разметка и верификация ответов из истории

### 5. Операторская панель

**Веб-интерфейс включает**:

- Единый inbox со всеми каналами
- Карточка клиента с историей
- ИИ-подсказки в реальном времени
- Быстрые ответы (шаблоны)
- Внутренние заметки по диалогу
- Передача диалога другому оператору
- Статусы: онлайн/офлайн/перерыв

**Распределение обращений**:
- Автоматическое (round-robin)
- По навыкам/отделам (skill-based routing)
- Ручной выбор из общей очереди
- Комбинированное (настраивается)

**Будущее**: интеграция в CRM (Bitrix24, amoCRM)

### 6. No-code конструктор

**Визуальный редактор сценариев**:
- Диалоговые деревья с ветвлениями
- Условия и переменные
- Кнопки и quick replies
- Сбор данных (формы)

**Триггеры и автоматизация**:
- Автосообщения по событиям
- Таймеры и напоминания
- Эскалация при неответе

**Управление RAG**:
- Загрузка документов
- Настройка краулинга
- Просмотр индексированных данных

**Интеграции**:
- Webhooks (исходящие/входящие)
- REST API
- Переменные и контекст

### 7. Отраслевые шаблоны

**Готовые сценарии для**:
- E-commerce / Ритейл
- Услуги и сервис
- B2B / SaaS
- Финансы и страхование
- Недвижимость
- Образование

**Возможность**: создавать сценарии с нуля без шаблонов

### 8. Аналитика и отчёты

**Операционные метрики**:
- Количество диалогов по каналам
- Среднее время ответа (FRT)
- Среднее время решения (ART)
- Нагрузка по операторам
- Пиковые часы

**Качественные метрики**:
- CSAT (оценка удовлетворённости)
- NPS (индекс лояльности)
- Оценки диалогов клиентами

**Бизнес-метрики**:
- Конверсия из диалога в заявку/продажу
- Процент отказов (abandoned chats)
- Стоимость обращения
- Эффективность ИИ-подсказок

**Дашборды**: Кастомизируемые с экспортом в PDF/Excel

### 9. White-label

**Полная кастомизация**:
- Логотип и брендинг
- Цветовая схема
- Кастомный домен (chat.client-domain.ru)
- Удаление упоминаний платформы

---

## Режимы работы

### Рабочее время
Диалоги распределяются на операторов, ИИ помогает с подсказками

### Вне рабочего времени
Настраиваемый сценарий:
- Сбор заявки (имя, контакт, вопрос)
- ИИ-ответы на типовые вопросы
- Информирование о времени работы
- Callback-форма

---

## Техническая архитектура

### Стек технологий

| Компонент | Технология |
|-----------|------------|
| Backend | Python 3.11+, FastAPI |
| База данных | PostgreSQL |
| Очереди | Redis / RabbitMQ |
| Векторная БД | Qdrant / Pinecone |
| Поиск | Elasticsearch |
| Frontend | React / Next.js |
| Real-time | WebSocket |
| Хостинг | Российский облачный провайдер |

### Интеграции каналов

| Канал | API |
|-------|-----|
| Telegram | Bot API |
| WhatsApp | WhatsApp Business API (через провайдера) |
| Веб-виджет | Собственный SDK (JS) |

### LLM интеграция

```
┌─────────────┐     ┌──────────────┐     ┌─────────────┐
│   Запрос    │────▶│   RAG Layer  │────▶│   LLM API   │
│  оператора  │     │  (контекст)  │     │ YandexGPT   │
└─────────────┘     └──────────────┘     └─────────────┘
```

---

## Безопасность и compliance

### 152-ФЗ (персональные данные)
- Хранение данных на серверах в РФ
- Согласие на обработку ПД
- Право на удаление данных

### PCI DSS (при необходимости)
- Не храним платёжные данные напрямую
- Интеграция с платёжными шлюзами через токены

### Стандартная защита
- HTTPS везде
- Шифрование данных at rest и in transit
- 2FA для операторов и админов
- Audit log всех действий
- RBAC (роли и права)

---

## Модель монетизации

**Статус**: В проработке

**Варианты для рассмотрения**:

1. **По диалогам**: X руб/диалог или пакеты
2. **По операторам**: X руб/оператор/месяц
3. **Тарифные планы**:
   - Free: ограниченный функционал
   - Pro: полный функционал, лимиты
   - Enterprise: безлимит, SLA, поддержка

---

## Roadmap

### Фаза 1: MVP
- [ ] Ядро системы (приём сообщений, хранение)
- [ ] Telegram интеграция
- [ ] Базовая операторская панель
- [ ] Простой RAG (документы)
- [ ] Базовая аналитика

### Фаза 2: Расширение каналов
- [ ] WhatsApp Business API
- [ ] Веб-виджет (bubble + embed)
- [ ] Единый профиль клиента

### Фаза 3: No-code и автоматизация
- [ ] Визуальный конструктор сценариев
- [ ] Триггеры и автоматизация
- [ ] Отраслевые шаблоны

### Фаза 4: Продвинутые функции
- [ ] Расширенная аналитика
- [ ] White-label
- [ ] Skill-based routing
- [ ] CRM интеграции

---

## Глоссарий

| Термин | Определение |
|--------|-------------|
| RAG | Retrieval-Augmented Generation — генерация ответов с поиском по базе знаний |
| FRT | First Response Time — время первого ответа |
| ART | Average Resolution Time — среднее время решения |
| CSAT | Customer Satisfaction Score — оценка удовлетворённости |
| NPS | Net Promoter Score — индекс лояльности |
| Skill-based routing | Маршрутизация по навыкам оператора |

---

## Открытые вопросы

1. **Название продукта** — требуется брендинг
2. **Модель монетизации** — требуется финансовое моделирование
3. **WhatsApp провайдер** — выбрать (360dialog, Twilio, WABA напрямую)
4. **Пилотный клиент** — активный поиск

---

*Документ создан: 20 января 2026*
*Версия: 1.0*
